<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Calendar</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Sacramento&family=Inter:wght@300;400;500&display=swap"
            rel="stylesheet"
        />
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body
        class="font-[Inter] bg-rose-50 min-h-screen px-4 py-10 opacity-0 translate-y-3 transition-all duration-500"
    >
        <div class="max-w-xl mx-auto">
            <div class="flex justify-between mb-6">
                <a href="index.html" class="text-rose-400">‚Üê back</a>
                <h1
                    class="text-3xl sm:text-4xl font-[Sacramento] text-rose-600"
                >
                    üå∏ Journal Calendar
                </h1>
                <span></span>
            </div>
            <div class="bg-white rounded-2xl p-4 shadow-sm">
                <div id="g" class="grid grid-cols-7 gap-2"></div>
            </div>
        </div>

        <script>
            const j = JSON.parse(localStorage.getItem("journals")) || [],
                g = document.getElementById("g");
            const d = new Date(),
                y = d.getFullYear(),
                m = d.getMonth();
            const f = new Date(y, m, 1).getDay(),
                t = new Date(y, m + 1, 0).getDate();
            for (let i = 0; i < f; i++) g.innerHTML += "<div></div>";
            for (let i = 1; i <= t; i++) {
                const s = `${y}-${String(m + 1).padStart(2, 0)}-${String(
                    i
                ).padStart(2, 0)}`;
                const h = j.find((x) => x.date === s);
                g.innerHTML += `<div class="aspect-square rounded-xl flex items-center justify-center
  ${h ? "bg-rose-200" : "text-slate-400"}">${i}</div>`;
            }
            window.addEventListener("load", () =>
                document.body.classList.remove("opacity-0", "translate-y-3")
            );
        </script>

        <audio
            id="clickSound"
            src="assets/sound/pop.mp3"
            preload="auto"
        ></audio>

        <script>
            const clickSound = document.getElementById("clickSound");

            document.querySelectorAll("a").forEach((link) => {
                link.addEventListener("click", (e) => {
                    const href = link.getAttribute("href");
                    if (!href) return;

                    e.preventDefault();

                    // play sound
                    clickSound.currentTime = 0;
                    clickSound.play();

                    // delay pindah halaman
                    setTimeout(() => {
                        window.location.href = href;
                    }, 250); // 0.25 detik
                });
            });
        </script>
    </body>
</html>
