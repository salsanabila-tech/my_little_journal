<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Write Journal</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Sacramento&family=Inter:wght@300;400;500&display=swap"
            rel="stylesheet"
        />
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body
        class="font-[Inter] bg-rose-50 min-h-screen px-4 py-10 opacity-0 translate-y-3 transition-all duration-500"
    >
        <div class="max-w-xl mx-auto">
            <div class="flex justify-between mb-6">
                <a href="index.html" class="text-rose-400">â† back</a>
                <h1
                    class="text-3xl sm:text-4xl font-[Sacramento] text-rose-600"
                >
                    âœï¸ Write Journal
                </h1>
                <span></span>
            </div>

            <div class="bg-white rounded-2xl p-6 shadow-sm">
                <input
                    type="date"
                    id="date"
                    class="w-full mb-3 rounded-xl border border-rose-200 px-4 py-2"
                />
                <select
                    id="mood"
                    class="w-full mb-3 rounded-xl border border-rose-200 px-4 py-2"
                >
                    <option>ğŸ€ soft</option>
                    <option>ğŸ¤ calm</option>
                    <option>ğŸŒ§ sad</option>
                    <option>âœ¨ happy</option>
                </select>
                <textarea
                    id="content"
                    class="w-full h-44 rounded-xl border border-rose-200 px-4 py-3"
                    placeholder="Today my heart feelsâ€¦"
                ></textarea>
                <button
                    onclick="save()"
                    class="w-full mt-4 bg-rose-300 text-white py-3 rounded-full"
                >
                    Save ğŸ’—
                </button>
                <p id="toast" class="hidden text-center text-rose-400 mt-3">
                    saved ğŸ€
                </p>
            </div>
        </div>

        <script>
            const c = document.getElementById("content");
            c.focus();
            function save() {
                const d = date.value,
                    m = mood.value,
                    t = c.value;
                if (!d || !t) return;
                const j = JSON.parse(localStorage.getItem("journals")) || [];
                j.unshift({ date: d, mood: m, text: t });
                localStorage.setItem("journals", JSON.stringify(j));
                c.value = "";
                toast.classList.remove("hidden");
                setTimeout(() => toast.classList.add("hidden"), 1200);
            }
            window.addEventListener("load", () =>
                document.body.classList.remove("opacity-0", "translate-y-3")
            );
        </script>

        <audio
            id="clickSound"
            src="assets/sound/pop.mp3"
            preload="auto"
        ></audio>

        <script>
            const clickSound = document.getElementById("clickSound");

            document.querySelectorAll("a").forEach((link) => {
                link.addEventListener("click", (e) => {
                    const href = link.getAttribute("href");
                    if (!href) return;

                    e.preventDefault();

                    // play sound
                    clickSound.currentTime = 0;
                    clickSound.play();

                    // delay pindah halaman
                    setTimeout(() => {
                        window.location.href = href;
                    }, 250); // 0.25 detik
                });
            });
        </script>
    </body>
</html>
